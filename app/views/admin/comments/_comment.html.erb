<div id="comment-item-<%= comment.id %>" class="card mb-2">
  <div class="card-header d-flex justify-content-between align-items-center">
    <div><strong><%= comment.user_initials %></strong>, <%= comment.formatted_date %></div>
    <div>
      <button class="btn btn-sm btn-outline-primary me-1" 
              data-action="comments#editComment" 
              data-comment-id="<%= comment.id %>" 
              data-comment-body="<%= comment.body %>">
        <i class="bi bi-pencil"></i>
      </button>
      <button class="btn btn-sm btn-outline-danger" 
              data-action="comments#archiveComment" 
              data-comment-id="<%= comment.id %>">
        <i class="bi bi-archive"></i>
      </button>
    </div>
  </div>
  <div class="card-body">
    <div id="comment-display-<%= comment.id %>">
      <div class="accordion" id="accordionComment<%= comment.id %>">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse<%= comment.id %>" aria-expanded="false" aria-controls="collapse<%= comment.id %>">
              <%= comment.truncated_body %>
            </button>
          </h2>
          <div id="collapse<%= comment.id %>" class="accordion-collapse collapse" data-bs-parent="#accordionComment<%= comment.id %>">
            <div class="accordion-body">
              <%= comment.body %>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div id="edit-comment-form-<%= comment.id %>" class="d-none">
      <form action="<%= update_comment_admin_comment_path(comment) %>" method="post" data-action="comments#updateComment" data-comment-id="<%= comment.id %>">
        <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
        <input type="hidden" name="_method" value="patch">
        <div class="mb-3">
          <textarea name="body" id="edit-comment-body-<%= comment.id %>" class="form-control" rows="3" required><%= comment.body %></textarea>
        </div>
        <div class="d-flex justify-content-end">
          <button type="button" class="btn btn-sm btn-secondary me-2" data-action="comments#cancelEdit" data-comment-id="<%= comment.id %>">Cancel</button>
          <button type="submit" class="btn btn-sm btn-primary">Update</button>
        </div>
      </form>
    </div>
  </div>
</div>