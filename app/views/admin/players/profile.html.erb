<div class="container-fluid mt-4">
  <div class="row">
    <!-- Player Card -->
    <div class="col-md-6 mb-4">
      <div class="card h-100">
        <div class="card-header bg-primary text-white">
          <h4><%= @instance.full_description %></h4>
        </div>
        <div class="card-body">          
          <!-- Status and Metrics -->
          <div class="card-text mb-3">
            <table class="table table-sm">
              <tbody>
                <tr>
                  <th scope="row" style="width: 30%">Roster</th>
                  <td><%= @instance.roster&.name %></td>
                </tr>
                <tr>
                  <th scope="row">Team</th>
                  <td><%= @instance.team&.name %></td>
                </tr>
                <tr>
                  <th scope="row">Acquired</th>
                  <td>2017 Draft 1.17</td>
                </tr>
                <tr>
                  <th scope="row">Current Level</th>
                  <td><%= @instance.level&.name %></td>
                </tr>
                <tr>
                  <th scope="row">ETA / Risk</th>
                  <td><%= @profile.eta %> / <%= @profile.risk %></td>
                </tr>
                <tr>
                  <th scope="row">Age / Ht / Wt</th>
                  <td><%= format_stat(@instance.age, :integer) %> / <%= @instance.height %> / <%= @instance.weight %></td>
                </tr>
                <tr>
                  <th scope="row">Hits / Throws</th>
                  <td><%= @instance.bats %> / <%= @instance.throws %></td>
                </tr>
                <tr>
                  <th scope="row">TJ Surgery</th>
                  <td><%= default_date_format(@profile.tj_at) %></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Scouting Card -->
    <div class="col-md-6 mb-4">
      <div class="card h-100">
        <div class="card-header bg-success text-white">
          <h4>Scouting Reports</h4>
        </div>
        <div class="card-body">
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Preseason 2025, K Law</h5>
                <small>2025-03-15</small>
              </div>
              <small>The Athletic</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Preseason 2025, K McDaniel</h5>
                <small>2025-03-12</small>
              </div>
              <small>ESPN</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Preseason 2025, E Longenhagen</h5>
                <small>2025-03-10</small>
              </div>
              <small>FanGraphs</small>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Analysis and Rankings Row -->
  <div class="row mb-4">
    <!-- Analysis Card -->
    <div class="col-md-6 mb-4 mb-md-0">
      <div class="card h-100">
        <div class="card-header bg-info text-white">
          <h4>Analysis</h4>
        </div>
        <div class="card-body">
          <div class="accordion" id="analysisAccordion">
            <% @reports.each_with_index do |report, index| %>
              <% el_name = "collapse_#{index}"%>
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#<%= el_name %>" aria-expanded="true" aria-controls="<%= el_name %>">
                    <%= report.scout.last_name %> <%= report.reported_at.strftime('%m/%y') %>: <%= report.body&.truncate(50) %>
                  </button>
                </h2>
                <div id="<%= el_name %>" class="accordion-collapse collapse <%= index == 0 ? 'show' : '' %>" aria-labelledby="headingOne" data-bs-parent="#analysisAccordion">
                  <div class="accordion-body">
                    <%= report.body %>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Rankings Card -->
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-warning">
          <h4>Rankings</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered">
              <thead class="bg-light">
                <tr>
                  <th scope="col">Metric</th>
                  <th scope="col">FG</th>
                  <th scope="col">ESPN</th>
                  <th scope="col">ATH</th>
                  <th scope="col">BA</th>
                  <th scope="col">CBS</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Overall</th>
                  <td><%= format_stat(@profile.fg_overall_rank, :integer) %></td>
                  <td><%= format_stat( @profile.espn_overall_rank, :integer) %></td>
                  <td><%= format_stat(@profile.ath_overall_rank, :integer) %></td>
                  <td><%= format_stat(@profile.ba_overall_rank, :integer) %></td>
                  <td><%= format_stat(@profile.cbs_overall_rank, :integer) %></td>
                </tr>
                <tr>
                  <th scope="row">Team</th>
                  <td><%= format_stat(@profile.fg_team_rank, :integer) %></td>
                  <td><%= format_stat( @profile.espn_team_rank, :integer) %></td>
                  <td><%= format_stat(@profile.ath_team_rank, :integer) %></td>
                  <td><%= format_stat(@profile.ba_team_rank, :integer) %></td>
                  <td><%= format_stat(@profile.cbs_team_rank, :integer) %></td>
                </tr>
                <tr>
                  <th scope="row">FV</th>
                  <td><%= format_stat(@profile.fg_future_value, :integer) %></td>
                  <td><%= format_stat( @profile.espn_future_value, :integer) %></td>
                  <td><%= format_stat(@profile.ath_future_value, :integer) %></td>
                  <td><%= format_stat(@profile.ba_future_value, :integer) %></td>
                  <td><%= format_stat(@profile.cbs_future_value, :integer) %></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Hitting Grades -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-danger text-white">
          <h4>Hitting Grades</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered">
              <thead>
                <tr class="bg-dark text-white">
                  <th scope="col">Scout</th>
                  <th scope="col">Hit</th>
                  <th scope="col">Game Power</th>
                  <th scope="col">Raw Power</th>
                  <th scope="col">Bat Control</th>
                  <th scope="col">Pitch Selection</th>
                  <th scope="col">Hard Hit</th>
                  <th scope="col">Speed</th>
                  <th scope="col">Field</th>
                  <th scope="col">Arm</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Law</th>
                  <td>45/55</td>
                  <td>50/60</td>
                  <td>55/65</td>
                  <td>45</td>
                  <td>40</td>
                  <td>65</td>
                  <td>55/50</td>
                  <td>45/55</td>
                  <td>60/60</td>
                </tr>
                <tr>
                  <th scope="row">McDaniel</th>
                  <td>40/50</td>
                  <td>55/65</td>
                  <td>60/70</td>
                  <td>40</td>
                  <td>45</td>
                  <td>70</td>
                  <td>60/55</td>
                  <td>40/50</td>
                  <td>55/55</td>
                </tr>
                <tr>
                  <th scope="row">Longenhagen</th>
                  <td>45/55</td>
                  <td>50/65</td>
                  <td>55/70</td>
                  <td>45</td>
                  <td>45</td>
                  <td>65</td>
                  <td>50/50</td>
                  <td>50/55</td>
                  <td>55/60</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Pitching Grades -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-secondary text-white">
          <h4>Pitching Grades</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered">
              <thead class="bg-light">
                <tr>
                  <th scope="col">Scout</th>
                  <th scope="col">Command</th>
                  <th scope="col">Control</th>
                  <th scope="col">Fastball</th>
                  <th scope="col">Sweeper</th>
                  <th scope="col">Slider</th>
                  <th scope="col">Curve</th>
                  <th scope="col">Changeup</th>
                  <th scope="col">Cutter</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Law</th>
                  <td>45/55</td>
                  <td>50/60</td>
                  <td>60/65</td>
                  <td>50/55</td>
                  <td>45/55</td>
                  <td>40/50</td>
                  <td>55/60</td>
                  <td>-/-</td>
                </tr>
                <tr>
                  <th scope="row">McDaniel</th>
                  <td>50/60</td>
                  <td>55/65</td>
                  <td>65/70</td>
                  <td>-/-</td>
                  <td>60/65</td>
                  <td>-/-</td>
                  <td>50/60</td>
                  <td>45/55</td>
                </tr>
                <tr>
                  <th scope="row">Longenhagen</th>
                  <td>55/60</td>
                  <td>55/60</td>
                  <td>60/65</td>
                  <td>55/60</td>
                  <td>-/-</td>
                  <td>60/65</td>
                  <td>45/55</td>
                  <td>-/-</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Hitting Stats -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-info text-white">
          <h4>Hitting Statistics</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-sm">
              <thead class="bg-light">
                <tr>
                  <th>Season</th>
                  <th>Team</th>
                  <th>Level</th>
                  <th>G</th>
                  <th>PA</th>
                  <th>AB</th>
                  <th>H</th>
                  <th>HR</th>
                  <th>R</th>
                  <th>RBI</th>
                  <th>BB</th>
                  <th>K</th>
                  <th>SB</th>
                  <th>CS</th>
                  <th>BB%</th>
                  <th>K%</th>
                  <th>BABIP</th>
                  <th>AVG</th>
                  <th>OBP</th>
                  <th>SLG</th>
                  <th>OPS</th>
                  <th>WAR</th>
                  <th>wRC+</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>2024</td>
                  <td>BOS</td>
                  <td>AAA</td>
                  <td>118</td>
                  <td>477</td>
                  <td>417</td>
                  <td>135</td>
                  <td>22</td>
                  <td>85</td>
                  <td>73</td>
                  <td>48</td>
                  <td>117</td>
                  <td>18</td>
                  <td>5</td>
                  <td>10.1%</td>
                  <td>24.5%</td>
                  <td>.379</td>
                  <td>.324</td>
                  <td>.392</td>
                  <td>.535</td>
                  <td>.927</td>
                  <td>4.2</td>
                  <td>142</td>
                </tr>
                <tr>
                  <td>2023</td>
                  <td>BOS</td>
                  <td>AA</td>
                  <td>105</td>
                  <td>452</td>
                  <td>401</td>
                  <td>115</td>
                  <td>15</td>
                  <td>71</td>
                  <td>65</td>
                  <td>43</td>
                  <td>109</td>
                  <td>22</td>
                  <td>3</td>
                  <td>9.5%</td>
                  <td>24.1%</td>
                  <td>.350</td>
                  <td>.287</td>
                  <td>.354</td>
                  <td>.474</td>
                  <td>.828</td>
                  <td>3.7</td>
                  <td>124</td>
                </tr>
                <tr>
                  <td>2022</td>
                  <td>BOS</td>
                  <td>A+</td>
                  <td>98</td>
                  <td>421</td>
                  <td>375</td>
                  <td>98</td>
                  <td>9</td>
                  <td>57</td>
                  <td>49</td>
                  <td>38</td>
                  <td>98</td>
                  <td>25</td>
                  <td>7</td>
                  <td>9.0%</td>
                  <td>23.3%</td>
                  <td>.319</td>
                  <td>.261</td>
                  <td>.330</td>
                  <td>.403</td>
                  <td>.733</td>
                  <td>2.5</td>
                  <td>106</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Pitching Stats -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-secondary text-white">
          <h4>Pitching Statistics</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-sm">
              <thead class="bg-light">
                <tr>
                  <th>Season</th>
                  <th>Team</th>
                  <th>Level</th>
                  <th>G</th>
                  <th>GS</th>
                  <th>W</th>
                  <th>L</th>
                  <th>QS</th>
                  <th>CG</th>
                  <th>SV</th>
                  <th>HD</th>
                  <th>BS</th>
                  <th>IP</th>
                  <th>HA</th>
                  <th>RA</th>
                  <th>ER</th>
                  <th>HRA</th>
                  <th>BB</th>
                  <th>HBP</th>
                  <th>WP</th>
                  <th>BK</th>
                  <th>K/9</th>
                  <th>ERA</th>
                  <th>WHIP</th>
                  <th>BABIP</th>
                  <th>LOB%</th>
                  <th>FIP</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>2024</td>
                  <td>BOS</td>
                  <td>AAA</td>
                  <td>24</td>
                  <td>24</td>
                  <td>12</td>
                  <td>6</td>
                  <td>17</td>
                  <td>2</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>144.1</td>
                  <td>117</td>
                  <td>53</td>
                  <td>48</td>
                  <td>11</td>
                  <td>35</td>
                  <td>5</td>
                  <td>3</td>
                  <td>1</td>
                  <td>10.2</td>
                  <td>3.00</td>
                  <td>1.05</td>
                  <td>.285</td>
                  <td>78.5%</td>
                  <td>3.25</td>
                </tr>
                <tr>
                  <td>2023</td>
                  <td>BOS</td>
                  <td>AA</td>
                  <td>22</td>
                  <td>22</td>
                  <td>9</td>
                  <td>7</td>
                  <td>14</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>127.2</td>
                  <td>115</td>
                  <td>58</td>
                  <td>51</td>
                  <td>14</td>
                  <td>39</td>
                  <td>7</td>
                  <td>5</td>
                  <td>2</td>
                  <td>9.4</td>
                  <td>3.60</td>
                  <td>1.21</td>
                  <td>.294</td>
                  <td>73.2%</td>
                  <td>3.85</td>
                </tr>
                <tr>
                  <td>2022</td>
                  <td>BOS</td>
                  <td>A+</td>
                  <td>21</td>
                  <td>19</td>
                  <td>8</td>
                  <td>8</td>
                  <td>12</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>0</td>
                  <td>110.0</td>
                  <td>105</td>
                  <td>62</td>
                  <td>55</td>
                  <td>16</td>
                  <td>45</td>
                  <td>8</td>
                  <td>7</td>
                  <td>3</td>
                  <td>8.6</td>
                  <td>4.50</td>
                  <td>1.36</td>
                  <td>.303</td>
                  <td>70.5%</td>
                  <td>4.35</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Meta Data -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header bg-dark text-white">
          <h4>Metadata</h4>
        </div>
        <div class="card-body">
          <p><strong>Created:</strong> 2023-11-15</p>
          <p><strong>Updated:</strong> 2025-03-15</p>
        </div>
      </div>
    </div>
  </div>
</div>
