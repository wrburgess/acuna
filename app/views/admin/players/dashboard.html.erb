<%= render Admin::HeaderForIndex::Component.new(
  instance: @instance, 
  controller: params[:controller], 
  action: params[:action], 
  new_button: true, 
  collection_export_xlsx_button: true, 
  show_filtering: true) 
%>

<%= render Admin::PageContainer::Component.new do %> 
  <!-- Level Filter Navigation -->
  <div class="card mb-3">
    <div class="card-body py-2">
      <div class="d-flex align-items-center">
        <div class="filter-title me-3 fw-bold text-secondary" style="min-width: 120px;">Level</div>
        <ul class="nav nav-pills nav-fill flex-grow-1 mb-0">
          <li class="nav-item">
            <% all_level_params = params[:q] ? params[:q].to_unsafe_h.except(:level_id_eq) : {} %>
            <%= link_to "All", dashboard_admin_players_path(q: all_level_params), 
                  class: "nav-link #{'active' unless params[:q] && params[:q][:level_id_eq]}" %>
          </li>
          <% @levels.each do |level| %>
            <li class="nav-item">
              <% current_params = params[:q] ? params[:q].to_unsafe_h.dup : {} %>
              <% current_params[:level_id_eq] = level.id %>
              <%= link_to level.abbreviation, dashboard_admin_players_path(q: current_params), 
                    class: "nav-link #{'active' if params[:q] && params[:q][:level_id_eq].to_i == level.id}" %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <!-- Status Filter Navigation -->
  <div class="card mb-3">
    <div class="card-body py-2">
      <div class="d-flex align-items-center">
        <div class="filter-title me-3 fw-bold text-secondary" style="min-width: 120px;">Status</div>
        <ul class="nav nav-pills nav-fill flex-grow-1 mb-0">
          <li class="nav-item">
            <% all_status_params = params[:q] ? params[:q].to_unsafe_h.except(:status_id_eq) : {} %>
            <%= link_to "All", dashboard_admin_players_path(q: all_status_params), 
                  class: "nav-link #{'active' unless params[:q] && params[:q][:status_id_eq]}" %>
          </li>
          <% @statuses.each do |status| %>
            <li class="nav-item">
              <% current_params = params[:q] ? params[:q].to_unsafe_h.dup : {} %>
              <% current_params[:status_id_eq] = status.id %>
              <%= link_to status.abbreviation, dashboard_admin_players_path(q: current_params), 
                    class: "nav-link #{'active' if params[:q] && params[:q][:status_id_eq].to_i == status.id}" %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <!-- Position Filter Navigation -->
  <div class="card mb-3">
    <div class="card-body py-2">
      <div class="d-flex align-items-center">
        <div class="filter-title me-3 fw-bold text-secondary" style="min-width: 120px;">Position</div>
        <ul class="nav nav-pills nav-fill flex-grow-1 mb-0">
          <%# "All" link: remove any position filter keys %>
          <% all_position_params = params[:q] ? params[:q].to_unsafe_h.except(:position_in, :position_eq) : {} %>
          <li class="nav-item">
            <%= link_to "All", dashboard_admin_players_path(q: all_position_params),
                  class: "nav-link #{'active' unless (params[:q] && (params[:q][:position_in].present? || params[:q][:position_eq].present?))}" %>
          </li>

          <%# Load positions from the model and order as desired %>
          <% @positions.each do |position| %>
            <li class="nav-item">
              <% current_params = params[:q] ? params[:q].to_unsafe_h.except(:position_in, :position_eq).dup : {} %>
              <% if position.collective_values.present? && position.collective_values.size > 1 %>
                <% current_params[:position_in] = position.collective_values %>
              <% else %>
                <% current_params[:position_eq] = position.abbreviation %>
              <% end %>

              <%# Determine if this link should be "active" by comparing the filter value %>
              <% is_active = false %>
              <% if params[:q] %>
                <% if current_params[:position_in] && params[:q][:position_in].to_s == current_params[:position_in].to_s %>
                  <% is_active = true %>
                <% elsif current_params[:position_eq] && params[:q][:position_eq].to_s == current_params[:position_eq].to_s %>
                  <% is_active = true %>
                <% end %>
              <% end %>

              <%= link_to position.abbreviation, dashboard_admin_players_path(q: current_params),
                    class: "nav-link #{'active' if is_active}" %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <!-- List Filter Navigation -->
  <div class="card mb-3">
    <div class="card-body py-2">
      <div class="d-flex align-items-center">
        <div class="filter-title me-3 fw-bold text-secondary" style="min-width: 120px;">Lists</div>
        <ul class="nav nav-pills nav-fill flex-grow-1 mb-0">
          <li class="nav-item">
            <% all_list_params = params[:q] ? params[:q].to_unsafe_h.except(:tracking_list_players_tracking_list_id_eq) : {} %>
            <%= link_to "None", dashboard_admin_players_path(q: all_list_params), 
              class: "nav-link #{'active' unless params[:q] && params[:q][:tracking_list_players_tracking_list_id_eq]}" %>
          </li>
          <% current_user.tracking_lists.each do |list| %>
            <% current_params = params[:q] ? params[:q].to_unsafe_h.except(:tracking_list_players_tracking_list_id_eq).dup : {} %>
            <% current_params[:tracking_list_players_tracking_list_id_eq] = list.id %>
            <% is_active = params[:q] && params[:q][:tracking_list_players_tracking_list_id_eq].to_i == list.id %>
            <li class="nav-item">
              <%= link_to dashboard_admin_players_path(q: current_params), class: "nav-link #{'active' if is_active}" do %>
                <i class="bi <%= list.icon_name_off %> me-1"></i> <%= list.name %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <!-- Timeline Filter Navigation -->
  <div class="card mb-3">
    <div class="card-body py-2">
      <div class="d-flex align-items-center">
        <div class="filter-title me-3 fw-bold text-secondary" style="min-width: 120px;">Timeline</div>
        <ul class="nav nav-pills nav-fill flex-grow-1 mb-0">
          <li class="nav-item">
            <% timeline_params = params[:q] ? params[:q].to_unsafe_h.except(:timeline_id_eq) : {} %>
            <%= link_to "Current", dashboard_admin_players_path(q: timeline_params), 
                  class: "nav-link #{'active' unless params[:q] && params[:q][:timeline_id_eq]}" %>
          </li>
          <% @timelines.each do |timeline| %>
            <% current_params = params[:q] ? params[:q].to_unsafe_h.dup : {} %>
            <% current_params[:timeline_id_eq] = timeline.id %>
            <li class="nav-item">
              <%= link_to timeline.abbreviation.upcase, dashboard_admin_players_path(q: current_params), 
                    class: "nav-link #{'active' if params[:q] && params[:q][:timeline_id_eq].to_i == timeline.id}" %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <!-- Views Filter Navigation -->
  <div class="card mb-3">
    <div class="card-body py-2">
      <div class="d-flex align-items-center" data-controller="column-view">
        <div class="filter-title me-3 fw-bold text-secondary" style="min-width: 120px;">Views</div>
        <ul class="nav nav-pills nav-fill flex-grow-1 mb-0">
          <% view = params[:view] || 'stats' %>
          <% q_params = params[:q]&.to_unsafe_h || {} %>
          
          <li class="nav-item">
            <%= link_to "Stats", 
                dashboard_admin_players_path(view: 'stats', q: q_params), 
                class: "nav-link #{view == 'stats' ? 'active' : ''}", 
                data: { 
                  action: "click->column-view#showStats",
                  column_view_target: "statsButton" 
                } %>
          </li>
          <li class="nav-item">
            <%= link_to "Scoring", 
                dashboard_admin_players_path(view: 'scoring', q: q_params), 
                class: "nav-link #{view == 'scoring' ? 'active' : ''}", 
                data: { 
                  action: "click->column-view#showScoring",
                  column_view_target: "scoringButton" 
                } %>
          </li>
          <li class="nav-item">
            <%= link_to "Scouting", 
                dashboard_admin_players_path(view: 'scouting', q: q_params), 
                class: "nav-link #{view == 'scouting' ? 'active' : ''}", 
                data: { 
                  action: "click->column-view#showScouting",
                  column_view_target: "scoutingButton" 
                } %>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Player Data Table -->
  <div class="card mb-3">
    <div class="card-body p-0">
      <div class="table-responsive" data-controller="column-view">
        <table class="table table-sm table-hover" style="font-size: 0.8rem;">
          <thead>
            <tr class="bg-light">
              <th class="py-1" data-column-view-category="base">Track</th>
              <th class="py-1" data-column-view-category="base"><%= player_sort_link(@q, :last_name, "Player", default_order: :asc) %></th>
              <th class="py-1" data-column-view-category="base"><%= player_sort_link(@q, :roster_name, "Roster") %></th>
              <th class="py-1" data-column-view-category="base"><%= player_sort_link(@q, :player_level_weight, "Level") %></th>
              <th class="py-1" data-column-view-category="base"><%= player_sort_link(@q, :player_status_weight, "Status") %></th>
              <th class="py-1" data-column-view-category="base"><%= player_sort_link(@q, :age, "Age") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :ops, "OPS") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :rbi, "RBI") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :hr, "HR") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :r, "R") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :nsb, "NSB") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :errs) %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :wrc_plus, "wRC+") %></th>
              <th class="py-1" data-column-view-category="scoring"><%= player_sort_link(@q, :ops, "OPS") %></th>
              <th class="py-1" data-column-view-category="scoring"><%= player_sort_link(@q, :rbi, "RBI") %></th>
              <th class="py-1" data-column-view-category="scoring"><%= player_sort_link(@q, :hr, "HR") %></th>
              <th class="py-1" data-column-view-category="scoring"><%= player_sort_link(@q, :r, "R") %></th>
              <th class="py-1" data-column-view-category="scoring"><%= player_sort_link(@q, :nsb, "NSB") %></th>
              <th class="py-1" data-column-view-category="scoring"><%= player_sort_link(@q, :errs) %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :pa, "PA") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :ab, "AB") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :h, "H") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :bb, "BB") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :bb_pct, "BB%") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :k, "K") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :k_pct, "K%") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :sb, "SB") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :cs, "CS") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :ba, "BA") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :obp, "OBP") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :slg, "SLG") %></th>
              <th class="py-1" data-column-view-category="stats"><%= player_sort_link(@q, :war, "WAR") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :risk, "RISK") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :eta, "ETA") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :ath_ovr_rnk, "ATH") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :espn_ovr_rnk, "ESPN") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :fg_ovr_rnk, "FG") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :cbs_ovr_rnk, "CBS") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :pl_ovr_rnk, "PL") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :fg_fv, "FGFV") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :espn_fv, "EFV") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :game_pwr_proj, "GPW") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :raw_pwr_proj, "RPW") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :spd_proj, "SPD") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :fld_proj, "FLD") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :pit_sel, "PSEL") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :bat_ctrl, "BCTL") %></th>
              <th class="py-1" data-column-view-category="scouting"><%= player_sort_link(@q, :hard_hit, "HH%") %></th>
            </tr>
          </thead>
          <tbody>
            <% @instances.each do |instance| %>
              <tr>
                <td class="py-1" data-column-view-category="base">
                  <% current_user.tracking_lists.each do |tracking_list| %>
                    <% is_tracked = instance.aggregated_tracking_list_ids.include?(tracking_list.id) %>
                    <button 
                      type="button" 
                      class="btn btn-sm p-0"
                      data-controller="tracking-list-player"
                      data-tracking-list-player-player-id-value="<%= instance.player_id %>"
                      data-tracking-list-player-tracking-list-id-value="<%= tracking_list.id %>"
                      data-tracking-list-player-tracked-value="<%= is_tracked %>"
                      data-tracking-list-name="<%= tracking_list.name %>"
                      data-icon-on="<%= tracking_list.icon_name_on %>"
                      data-icon-off="<%= tracking_list.icon_name_off %>"
                      data-tracking-list-player-target="button"
                      data-action="click->tracking-list-player#toggle"
                      data-bs-toggle="tooltip" 
                      title="<%= is_tracked ? "Remove from #{tracking_list.name}" : "Add to #{tracking_list.name}" %>">
                      <i class="<%= is_tracked ? "bi #{tracking_list.icon_name_on} text-warning" : "bi #{tracking_list.icon_name_off} text-muted" %>"></i>
                    </button>
                  <% end %>
                </td>
                <td class="py-1" data-column-view-category="base">
                  <%= link_to(instance.full_description, admin_player_path(id: instance.player_id), class: "text-decoration-none") %>
                </td>
                <td class="py-1" data-column-view-category="base">
                  <%= instance.roster ? link_to(instance.roster&.abbreviation, polymorphic_path([:admin, instance.roster])) : 'FA' %>
                </td>
                <td class="py-1" data-column-view-category="base"><%= instance.level_abbreviation %></td>
                <td class="py-1" data-column-view-category="base"><%= instance.status_abbreviation %></td>
                <td class="py-1" data-column-view-category="base"><%= instance.age.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= format_stat(instance.ops) %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.rbi.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.hr.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.runs.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.nsb.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.errs %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.wrc_plus.ceil %></td>
                <td class="py-1" data-column-view-category="scoring"><%= format_stat(instance.ops) %></td>
                <td class="py-1" data-column-view-category="scoring"><%= instance.rbi.ceil %></td>
                <td class="py-1" data-column-view-category="scoring"><%= instance.hr.ceil %></td>
                <td class="py-1" data-column-view-category="scoring"><%= instance.runs.ceil %></td>
                <td class="py-1" data-column-view-category="scoring"><%= instance.nsb.ceil %></td>
                <td class="py-1" data-column-view-category="scoring"><%= instance.errs %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.pa.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.ab.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.hits.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.bb.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= number_to_percentage(instance.bb_pct, precision: 0) %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.k.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= number_to_percentage(instance.k_pct, precision: 0) %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.sb.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.cs.ceil %></td>
                <td class="py-1" data-column-view-category="stats"><%= format_stat(instance.bavg) %></td>
                <td class="py-1" data-column-view-category="stats"><%= format_stat(instance.obp) %></td>
                <td class="py-1" data-column-view-category="stats"><%= format_stat(instance.slg) %></td>
                <td class="py-1" data-column-view-category="stats"><%= instance.war.ceil %></td>
                <td class="py-1" data-column-view-category="scouting"><%= instance.risk %></td>
                <td class="py-1" data-column-view-category="scouting"><%= instance.eta %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.ath_ovr_rnk) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.fg_ovr_rnk) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.espn_ovr_rnk) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.cbs_ovr_rnk) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.pl_ovr_rnk) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.fg_fv) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.espn_fv) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rating(instance.game_pwr_pres, instance.game_pwr_proj) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rating(instance.raw_pwr_pres, instance.raw_pwr_proj) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rating(instance.spd_pres, instance.spd_proj) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rating(instance.fld_pres, instance.fld_proj) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.pit_sel) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= format_rnk(instance.bat_ctrl) %></td>
                <td class="py-1" data-column-view-category="scouting"><%= number_to_percentage(instance.hard_hit, precision: 0) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Pitcher Specific Table (Hidden by default) -->
  <div class="card mb-3 d-none">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-sm table-hover" style="font-size: 0.8rem;">
          <thead>
            <tr class="bg-light">
              <th class="py-1">TRX</th>
              <th class="py-1"><%= sort_link([:admin, @q], :last_name, "Player", default_order: :asc) %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :roster_id, "Roster") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :position, "Pos", default_order: :asc) %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :level, "Level") %></th>
              <th class="py-1 border-end"><%= sort_link([:admin, @q], :age, "Age") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :qs, "QS") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :k_per_nine, "K/9") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :era, "ERA") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :whip, "WHIP") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :nr, "NR") %></th>
              <th class="py-1 border-end"><%= sort_link([:admin, @q], :inn, "INN") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :w, "W-L") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :ha, "HA") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :hra, "HRA") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :baa, "BAA") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :s, "S") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :bs, "BS") %></th>
              <th class="py-1"><%= sort_link([:admin, @q], :rw, "RW") %></th>
              <th class="py-1">Track</th>
            </tr>
          </thead>
          <tbody>
            <% @instances.each do |instance| %>
              <tr>
                <td class="py-1">
                  <button type="button" class="btn btn-sm p-0" data-bs-toggle="tooltip" title="<%= instance.present? ? 'Mark as tracked' : 'Untrack player' %>">
                    <i class="<%= instance.present? ? 'bi bi-star text-muted' : 'bi bi-star-fill text-warning' %>"></i>
                  </button>
                  <span class="text-muted">FA</span>
                </td>
                <td class="py-1"><%= ['SP', 'RP'].sample %></td>
                <td class="py-1"><%= ['MLB', 'AAA', 'AA', 'A+', 'A', 'JPN', 'NCAA'].sample %></td>
                <td class="py-1 border-end"><%= rand(19..38) %></td>
                <td class="py-1"><%= rand(0..25) %></td>
                <td class="py-1"><%= (7.0 + rand * 5.0).round(1) %></td>
                <td class="py-1"><%= (2.0 + rand * 4.0).round(2) %></td>
                <td class="py-1"><%= (0.9 + rand * 0.6).round(2) %></td>
                <td class="py-1"><%= rand(10..80) %></td>
                <td class="py-1 border-end"><%= rand(20..220) %></td>
                <td class="py-1"><%= "#{rand(0..20)}-#{rand(0..15)}" %></td>
                <td class="py-1"><%= rand(20..200) %></td>
                <td class="py-1"><%= rand(5..40) %></td>
                <td class="py-1"><%= (0.150 + rand * 0.150).round(3) %></td>
                <td class="py-1"><%= rand(0..40) %></td>
                <td class="py-1"><%= rand(0..10) %></td>
                <td class="py-1"><%= rand(0..15) %></td>
                <td class="py-1">
                  <button type="button" class="btn btn-sm p-0" data-bs-toggle="tooltip" title="<%= instance.present? ? 'Mark as tracked' : 'Untrack player' %>">
                    <i class="<%= instance.present? ? 'bi bi-star text-muted' : 'bi bi-star-fill text-warning' %>"></i>
                  </button>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <%= render Admin::IndexPager::Component.new(pagy: @pagy, instance: @instance) %>

  <%= render Admin::FilterCard::Component.new do %>
    <%= simple_form_for [:admin, @q], url: polymorphic_path([:admin, @instance]), html: { method: :get }, wrapper: :floating_labels_form do |f| %>
      <%= f.input :id_eq, label: "ID", placeholder: "ID equals" %>
      <%= f.input :first_name_cont, label: "First Name", placeholder: "First Name contains" %>
      <%= f.input :last_name_cont, label: "Last Name", placeholder: "Last Name contains" %>
      <%= f.input :position_eq, label: "Position", placeholder: "Position equals" %>
      <%= f.input :level_id_eq, collection: Level.all, label: "Level", include_blank: "Any" %>
      <%= f.input :status_id_eq, collection: Status.all, label: "Status", include_blank: "Any" %>
      <%= f.input :team_id_eq, collection: Team.all, label: "Team", include_blank: "Any" %>
      <%= f.input :roster_id_eq, collection: Roster.all, label: "Roster", include_blank: "Any" %>
      <%= f.input :archived_at_not_null, as: :boolean, label: "Archived?", wrapper: :custom_boolean_switch %>
      
      <%= render Admin::FormButton::Component.new(operation: :filter) %>
      <%= render Admin::LinkButton::Component.new(text: 'Reset Form', path: request.path) %>
    <% end %>
  <% end %>
<% end %>

<style>
  .table-hover tbody tr:hover {
    background-color: rgba(0, 0, 0, 0.03);
  }
  
  .nav-pills .nav-link {
    padding: 0.25rem 0.5rem;
    font-size: 0.85rem;
  }
  
  .filter-title {
    font-size: 0.9rem;
  }
  
  .border-end {
    border-right: 1px solid #dee2e6 !important;
  }
</style>
