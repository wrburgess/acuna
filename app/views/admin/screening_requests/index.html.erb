<%= render "shared/admin/view_div_wrapper", obj: @instance do %>
  <div class="row header">
    <%= component "header_for_index", instance: @instance, new_button: true, export_xlsx_button: true %>
  </div>
  <div class="row main">
    <div class="col-9">
      <div class="row">
        <table class="table table-striped table-hover table-sm">
          <thead>
            <tr>
              <th><%= sort_link(@q, :id, "ID") %></th>
              <th><%= sort_link(@q, :requestor_title_name, "Film Name(s)", default_order: :asc) %></th>
              <th><%= sort_link(@q, :requestor_name, "Requestor", default_order: :asc) %></th>
              <th><%= sort_link(@q, :organization_name, "Organization", default_order: :asc) %></th>
              <th><%= sort_link(@q, :status, "Status", default_order: :asc) %></th>
              <th><%= sort_link(@q, :user_last_name, "Staff", default_order: :asc) %></th>
              <th><%= sort_link(@q, :created_at, "Submitted", default_order: :asc) %></th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @instances.each do |instance| %>
              <tr>
                <td><%= instance.id %></td>
                <td><%= instance.requestor_title_name %></td>
                <td><%= instance.requestor_name %></td>
                <td><%= instance.organization_name %></td>
                <td><%= instance.status.try(:upcase) %></td>
                <td><%= instance.user.try(:full_name) %></td>
                <td><%= full_datetime_format(instance.created_at.in_time_zone('America/Chicago')) %> CST</td>
                <td>
                  <%= component "action_button", operation: :show, instance: instance, button_classes: "me-3", icon_classes: :none %>
                  <%= component "action_button", operation: :edit, instance: instance, button_classes: :none, icon_classes: :none %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <div class="row pager">
        <%= component "index_pager", pagy: @pagy, instance: @instance %>
      </div>
    </div>
    <div class="col-3">
      <div class="card">
        <div class="card-header">
          Filters
        </div>
        <div class="card-body">
          <%= search_form_for @q do |f| %>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="id_eq" name="q[id_eq]" placeholder="id_eq" value="<%= params.dig(:q, :id_eq) %>">
              <label for="q[id_eq]" class="form-label">ID</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="requestor_title_name_cont" name="q[requestor_title_name_cont]" placeholder="name_cont" value="<%= params.dig(:q, :requestor_title_name_cont) %>">
              <label for="q[requestor_title_name_cont]" class="form-label">Requestor Title Name contains</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="requestor_name_cont" name="q[requestor_name_cont]" placeholder="requestor_name_cont" value="<%= params.dig(:q, :requestor_name_cont) %>">
              <label for="q[requestor_name_cont]" class="form-label">Requestor Name contains</label>
            </div>
            <div class="form-floating mb-3">
              <%= select_tag("q[status_eq]", options_for_select(ScreeningRequestStatusTypes.options_for_select, params.dig(:q, :status_eq)), prompt: "Any", class: "form-select") %>
              <label for="q[status_eq]" class="form-label">Status</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="title_name_cont" name="q[user_last_name_cont]" placeholder="user_last_name_cont" value="<%= params.dig(:q, :user_last_name_cont) %>">
              <label for="q[user_last_name_cont]" class="form-label">Staff Last Name contains</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="organization_name_cont" name="q[organization_name_cont]" placeholder="organization_name_cont" value="<%= params.dig(:q, :organization_name_cont) %>">
              <label for="q[organization_name_cont]" class="form-label">Organization Name contains</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="venue_name_cont" name="q[venue_name_cont]" placeholder="venue_name_cont" value="<%= params.dig(:q, :venue_name_cont) %>">
              <label for="q[venue_name_cont]" class="form-label">Venue Name contains</label>
            </div>
            <button class="btn btn-secondary me-3">
              <i class="bi bi-funnel"></i>
              Filter
            </button>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>
